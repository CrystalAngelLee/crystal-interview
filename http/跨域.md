> 参考： https://segmentfault.com/a/1190000022398875

# 同源策略

> **「同源策略」**是一个重要的安全策略，它用于限制一个[origin](https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FGlossary%2F%E6%BA%90)的文档或者它加载的脚本如何能与另一个源的资源进行交互。它能帮助阻隔恶意文档，减少可能被攻击的媒介。--来源 MDN

跨域问题其实就是浏览器的**同源策略**所导致的

⚠️同源：**protocol（协议）、domain（域名）、port（端口）三者一致**

# 如何解决跨域问题

##  JSONP(Json with Padding)

> 前端 + 后端方案：绕过跨域

**script img link iframe... 不存在跨域请求的限制**

前端构造script标签请求指定URL（由script标签发出的GET请求不受同源策略限制），服务器返回一个函数执行语句，该函数名称通常由查询参callback的值决定，函数的参数为服务器返回的json数据。该函数在前端执行后即可获取数据。

问题： 只能处理get请求；安全性不高

## CORS(Cross Origin Resource Share)跨域资源共享

> 跨域资源共享，后端方案，解决跨域

原理：cors是w3c规范，真正意义上解决跨域问题。它需要服务器对请求进行检查并对响应头做相应处理，从而允许跨域请求。

跨域资源共享([CORS](https://developer.mozilla.org/zh-CN/docs/Glossary/CORS)) 是一种机制，它使用额外的[HTTP](https://developer.mozilla.org/zh-CN/docs/Glossary/HTTP)头来告诉浏览器 让运行在一个 origin (domain) 上的 Web 应用被准许访问来自不同源服务器上的指定的资源。当一个资源从与该资源本身所在的服务器**不同的域、协议或端口**请求一个资源时，资源会发起一个**跨域 HTTP 请求**。

## 代理服务器

> 请求同源服务器，通过该服务器转发请求至目标服务器，得到结果再转发给前端。前端开发中测试服务器的代理功能就是采用的该解决方案，但是最终发布上线时如果web应用和接口服务器不在一起仍会跨域。

### Node 正向代理

利用服务端请求不会跨域的特性，让接口和当前站点同域。

### Nginx 反向代理

## 基于Iframe 的跨域解决方案

1. document.domain
2. window.location.hash
3. window.name

### 5. Websocket

### 6. window.postMessage

### 10. 浏览器开启跨域





## 参考

https://segmentfault.com/a/1190000022398875

- [websocket](https://developer.mozilla.org/zh-CN/docs/Web/API/WebSocket)